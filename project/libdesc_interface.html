<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>スクリプト言語 (Python、Scilab、Matlab) とのインタフェース &mdash; GetFEM++</title>
    
    <link rel="stylesheet" href="../_static/getfem.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="author" title="このドキュメントについて" href="../about.html" />
    <link rel="copyright" title="著作権" href="../copyright.html" />
    <link rel="top" title="GetFEM++" href="../index.html" />
    <link rel="up" title="ライブラリのさまざまな部分の説明" href="libdesc.html" />
    <link rel="next" title="付録A.参照要素と実要素の基本的な計算" href="appendixA.html" />
    <link rel="prev" title="継続モジュール" href="libdesc_cont.html" />
    <link rel="shortcut icon" type="image/png" href="../_static/icon.png" />
 

  </head>
  <body>
    <div class="related">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="appendixA.html" title="付録A.参照要素と実要素の基本的な計算"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="libdesc_cont.html" title="継続モジュール"
             accesskey="P">前へ</a> |</li>
        <li><a href="https://savannah.nongnu.org/projects/getfem" <img src="../_static/icon.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li></a>
        <li><a href="../index.html">GetFEM++</a> &raquo;</li>

          <li><a href="index.html" >$B%W%m%8%&#8217;%/%H$N&#64;bL&#64;(B</a> &raquo;</li>
          <li><a href="libdesc.html" accesskey="U">ライブラリのさまざまな部分の説明</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="interface-with-scripts-languages-python-scilab-and-matlab">
<span id="dp-libdesc-interface"></span><h1>スクリプト言語 (Python、Scilab、Matlab) とのインタフェース<a class="headerlink" href="#interface-with-scripts-languages-python-scilab-and-matlab" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p><em>GetFEM++</em> の簡略化された (むしろ完全な) インターフェイスは、いくつかのスクリプト言語で getfem を使用することができるように提供されています。</p>
<div class="section" id="description">
<h2>説明<a class="headerlink" href="#description" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>すべてのソースは <tt class="file docutils literal"><span class="pre">interface/src</span></tt> ディレクトリにあります。インターフェイスは、1つの大規模なライブラリ <tt class="docutils literal"><span class="pre">getfemint</span></tt> (getfem 相互作用の略) で構成され、その上の層として機能する <em>GetFEM++</em> ライブラリ、および python、matlab と scilab のインターフェイスによって使用されます。</p>
<p>このインターフェイスは、c++ ソースから自動的に生成されるものではありません (ガブガブなどのツールの場合もあります)。それは getfem に簡素化され、一貫性のあるインターフェイスとして設計されているものです。新しい言語を追加することは非常に簡単です (言語が密な配列操作のための構造を提供すると仮定して)。</p>
</div>
<div class="section" id="files">
<h2>ファイル<a class="headerlink" href="#files" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>ディレクトリ <tt class="file docutils literal"><span class="pre">interfacesrc</span></tt> 内のすべてのファイル。メインファイルの簡単な説明:</p>
<ul>
<li><p class="first"><tt class="file docutils literal"><span class="pre">getfem_interface.cc</span></tt> 。</p>
<p>これは、スクリプト言語と getfem インターフェイスの間のブリッジです。関数 getfem_interface_main は  <tt class="docutils literal"><span class="pre">extern</span> <span class="pre">&quot;C&quot;</span></tt> 関数としてエクスポートされるため、これはスクリプト言語と getfem インターフェイスの間の c++ 障害の一種となります (Cインターフェイスのみをエクスポートすると、多くの複雑なの問題が回避されます)。</p>
</li>
<li><p class="first"><tt class="file docutils literal"><span class="pre">matlab/gfm_mex.c</span></tt> 。</p>
<p>matlab インターフェイス。 getfem のインターフェースに関する唯一のファイルは <tt class="file docutils literal"><span class="pre">getfem_interface.h</span></tt> です。</p>
</li>
<li><p class="first"><tt class="file docutils literal"><span class="pre">python/getfem_python.c</span></tt> 。</p>
<p>python インターフェイス。 getfem のインターフェースに関する唯一のファイルは <tt class="file docutils literal"><span class="pre">getfem_interface.h</span></tt> です。</p>
</li>
<li><p class="first"><tt class="file docutils literal"><span class="pre">gfi_array.h</span></tt>, <tt class="file docutils literal"><span class="pre">gfi_array.c</span></tt> 。</p>
<p>どちらも <tt class="file docutils literal"><span class="pre">gfm_mex.c</span></tt> と <tt class="file docutils literal"><span class="pre">getfem_python.c</span></tt> は <tt class="docutils literal"><span class="pre">getfem_interface_main()</span></tt> から配列とオブジェクトハンドルを送受信する方法に関する簡単な規則を必要とします。このファイルはこのような機能を提供します。</p>
</li>
<li><p class="first"><tt class="file docutils literal"><span class="pre">getfemint_gsparse.h</span></tt>, <tt class="file docutils literal"><span class="pre">getfemint_precond.h</span></tt>, など.</p>
<p>必要に応じて、インタフェースオブジェクトに固有のファイル。(getfemint_gsparse は、異なる種類のストレージを切り替えることができるいくつかの種類の可変疎行列をエクスポートし、複雑な要素の実数) を出力します。</p>
</li>
<li><p class="first"><tt class="file docutils literal"><span class="pre">gf_workspace.cc</span></tt>, <tt class="file docutils literal"><span class="pre">gf_delete.cc</span></tt> 。</p>
<p>getfem オブジェクトのメモリ管理。たとえば <tt class="docutils literal"><span class="pre">mesh</span></tt> と <tt class="docutils literal"><span class="pre">mesh_fem</span></tt> の間の依存関係を処理するレイヤがあります。それを使用して別の getfem_object がまだある間、オブジェクトが破棄されることを確認します。目的は、ユーザーが getfem インターフェイスに不正な引数を渡すことによって getfem (およびホストプログラム、matlab、scilab または python) をクラッシュさせることができない状況下であることを確認することです。</p>
<p>また、(matlab は &#8220;object destructors&#8221; を持っていないので) matlab で多くの getfem オブジェクトの処理とクリーニングを簡素化するように設計されたワークスペースのスタックのようなものを提供しています。</p>
</li>
<li><p class="first"><tt class="file docutils literal"><span class="pre">getfemint.h</span></tt>, <tt class="file docutils literal"><span class="pre">getfemint.cc</span></tt> 。</p>
<p>入力と出力の引数のリストを getfem インターフェイス関数に解析するために使用される <tt class="docutils literal"><span class="pre">mexarg_in</span></tt>, <tt class="docutils literal"><span class="pre">mexarg_out</span></tt> クラスを定義します。 &#8220;mex&#8221; への参照が <tt class="file docutils literal"><span class="pre">gfm_mex.c</span></tt> に移されたので、名前空間はもう十分ではありません。</p>
</li>
<li><p class="first"><tt class="file docutils literal"><span class="pre">gf_mesh.cc</span></tt>, <tt class="file docutils literal"><span class="pre">gf_mesh_get.cc</span></tt>, <tt class="file docutils literal"><span class="pre">gf_mesh_set.cc</span></tt>, <tt class="file docutils literal"><span class="pre">gf_fem.cc</span></tt>, など。</p>
<p>エクスポートされるすべての関数は、オブジェクトの種類 (<tt class="docutils literal"><span class="pre">gf_mesh*</span></tt>, <tt class="docutils literal"><span class="pre">gf_mesh_fem*</span></tt>, <tt class="docutils literal"><span class="pre">gf_fem*</span></tt>) で並べ替えられた getfem インターフェイスになります。オブジェクトの構築 (<tt class="docutils literal"><span class="pre">gf_mesh</span></tt>) 、オブジェクトの変更 (<tt class="docutils literal"><span class="pre">gf_mesh_set</span></tt>) の1つとして編成され、オブジェクトの参照 (<tt class="docutils literal"><span class="pre">gf_mesh_get</span></tt>) 。これらの各ファイルには、引数の <tt class="docutils literal"><span class="pre">mexargs_in</span></tt> と <tt class="docutils literal"><span class="pre">mexargs_out</span></tt> スタックを受け取る1つの main 関数が含まれています。その後解析し、通常最初の引数を subfunction の名前として解釈します (matlab で <tt class="docutils literal"><span class="pre">gf_mesh_get('nbpts')</span></tt> 、または python で <tt class="docutils literal"><span class="pre">Mesh.nbpts()</span></tt> )。</p>
</li>
<li><p class="first"><tt class="file docutils literal"><span class="pre">matlab/gfm_rpx_mexint.c</span></tt> 。</p>
<p><tt class="docutils literal"><span class="pre">--enable-matlab-rpc</span></tt> が <tt class="docutils literal"><span class="pre">./configure</span></tt> スクリプトに渡されるときに使用される <tt class="file docutils literal"><span class="pre">gfm_mex.c</span></tt> の代替です。主な用途は、その場合には、matlab のインターフェイスは、&#8221;getfem_server&#8221; プログラムでソケットを介して通信するので、そのサーバープログラムをデバッグすることが可能であり、メモリリークまたは matlab の何かを混乱させることなく識別するインターフェイスをデバッグします (デバッグするのは苦痛です)。</p>
</li>
<li><p class="first"><tt class="file docutils literal"><span class="pre">python/getfem.py</span></tt> 。</p>
<p>python インタフェースは、python スクリプト &#8220;<tt class="file docutils literal"><span class="pre">bin/extract_doc.py</span></tt>&#8221; によってコンパイル中に生成される &#8220;<tt class="file docutils literal"><span class="pre">getfem.py</span></tt>&#8221; ファイルとして利用可能です。</p>
</li>
</ul>
</div>
<div class="section" id="objects-methods-and-functions-of-the-interface">
<h2>インターフェイスのオブジェクト、メソッド、および関数<a class="headerlink" href="#objects-methods-and-functions-of-the-interface" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>インターフェイスによって操作される主な概念は、オブジェクトの限られた数 (Fem, Mesh, MeshFem, Model ...)、関連するメソッド、およびこれらのオブジェクトで定義されている関数です。</p>
<p>特別な努力は、各部分サポートスクリプト言語 (Python、Scilab、Matlab) を別々に行うことなく、インターフェイスに新しいオブジェクト、メソッド、および関数の追加を容易にするために行われています。</p>
<p>さまざまなオブジェクト、メソッド、および関数のインターフェイスを構築するために必要なすべての情報は、ファイル <cite>interface/src/gf*.cc</cite> に含まれています。python スクリプト (<cite>bin/extract_doc</cite>) は、必要なすべてのファイルをそこで取得する情報から生成します。特に、それは python ファイル getfem.py を生成する、matlab の m-ファイルの異なる関数やオブジェクト (サブディレクトリを含む) と、自動ドキュメンテーションを生成します。</p>
<p>すべてのものを自動的に動作させるには、一定数のルールを尊重する必要があります。</p>
<ul>
<li><p class="first">オブジェクトは、インターフェイス上の3つのファイルで定義する必要があります。</p>
<ul class="simple">
<li><p class="first"><tt class="file docutils literal"><span class="pre">gf_objectname.cc</span></tt> : オブジェクトのコンストラクタが含まれています。</p>
</li>
<li><p class="first"><tt class="file docutils literal"><span class="pre">gf_objectname_get.cc</span></tt> : オブジェクトに関する情報を取得するメソッドが含まれています (存在する場合)。</p>
</li>
<li><p class="first"><tt class="file docutils literal"><span class="pre">gf_objectname_set.cc</span></tt> : オブジェクトを変換するメソッドが含まれています (存在する場合)。</p>
</li>
</ul>
</li>
<li><p class="first">関数のリストは1つのファイル <tt class="file docutils literal"><span class="pre">gf_commandname.cc</span></tt> によって定義されるサブコマンドのリストが含まれています。</p>
</li>
<li><p class="first">各ファイルについて、関数またはメソッドのリストに関する主な解説は、タグ &#8216;/<em>&#64;GFDOC&#8217; および &#8216;&#64;</em>/&#8217; で区切られています。オブジェクトのコンストラクタに対応するファイルの場合、注釈はオブジェクトの説明に対応している必要があります。</p>
</li>
<li><p class="first">各非自明ファイル gf_*.cc には、オブジェクトまたはサブコマンドのメソッドを定義できるマクロが含まれています。特に、このシステムは、呼び出されたメソッド/関数の効率的な検索をすることができます。このマクロでは、次の構文を使用して新しいメソッド/関数を宣言できます。</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="cm">/*@GET val = (&#39;method-name&#39;, params, ...)</span>
<span class="cm">   Documention of the method/function.</span>
<span class="cm">@*/</span>
<span class="n">sub_command</span>
<span class="p">(</span><span class="s">&quot;method-name&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
  <span class="p">...</span>
  <span class="n">body</span> <span class="n">of</span> <span class="n">the</span> <span class="n">method</span><span class="o">/</span><span class="n">function</span>
  <span class="p">...</span>
<span class="p">);</span>
</pre></div>
</div>
<p>最初の3行は、特別な構文を持つメソッド/関数の呼び出しを記述し、また、ドキュメントに含まれるメソッド/関数の説明を与える c++ の解説です。それは Python、Matlab と Scilab のための適切なインターフェイスを生成するために解析されるため、この解説の最初の行は重要です。</p>
<p>メソッド/関数の呼び出しの説明の構文は次のとおりです。 <tt class="docutils literal"><span class="pre">/*&#64;</span></tt> の後には、特別なキーワードが存在する必要があります。これは、<tt class="docutils literal"><span class="pre">INIT</span></tt>, <tt class="docutils literal"><span class="pre">GET</span></tt>, <tt class="docutils literal"><span class="pre">SET</span></tt>, <tt class="docutils literal"><span class="pre">RDATTR</span></tt> または <tt class="docutils literal"><span class="pre">FUNC</span></tt> のいずれかです。キーワード <tt class="docutils literal"><span class="pre">INIT</span></tt> は、これがオブジェクトのコンストラクタの記述であることを意味します。<tt class="docutils literal"><span class="pre">RDATTR</span></tt> は、オブジェクト属性を得ることを可能にする短いメソッドのためのものです。&#8217; &#8216; GET &#8216; &#8216; は、それを変更しないオブジェクトのメソッドのためのものです。 <tt class="docutils literal"><span class="pre">SET</span></tt> は、オブジェクトを変更するメソッドのためのもので、 <tt class="docutils literal"><span class="pre">FUNC</span></tt> は関数リストのサブコマンドのためのものです。</p>
<p>メソッド/関数が値を返す場合は、戻り値の名前 (任意です) に続いて <tt class="docutils literal"><span class="pre">=</span></tt> が返されます。</p>
<p>メソッド/関数のパラメータについて説明します。メソッドの場合、オブジェクト自体は言及されていません。最初のパラメーターは、単一引用符の間のメソッドまたはサブコマンド名である必要があります (特別な場合は、この名前がドットで始まる場合です。これは、コマンド名が不要なメソッド/関数に対応することを意味します)。</p>
<p>その他のパラメーターがある場合は、型を使用して宣言する必要があります。定義済みの型は次のとおりです。</p>
<blockquote>
<div><ul class="simple">
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;CELL</span></tt>   : セル配列、</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;imat</span></tt>   : 整数の行列、</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;ivec</span></tt>   : 整数のベクトル,</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;cvec</span></tt>   : 複素値のベクトル,</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;dcvec</span></tt>  : 複素値のベクトル,</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;dvec</span></tt>   : 実数値のベクトル,</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;vec</span></tt>    : 実数または複素数のベクトル,</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;dmat</span></tt>   : 実数値の行列,</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;mat</span></tt>    : 実数または複素数の行列,</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;str</span></tt>    : 文字列、</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;int</span></tt>    : 整数、</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;bool</span></tt>   : ブール型 (boolean)、</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;real</span></tt>   : 実際の値、</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;scalar</span></tt> : 実数または複素数を指定します。</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;list</span></tt>   : リスト。</p>
</li>
</ul>
</div></blockquote>
<p>さらに、 <tt class="docutils literal"><span class="pre">&#64;tobj</span></tt> はインタフェースによって定義されたオブジェクトを参照します。たとえば、ou は <tt class="docutils literal"><span class="pre">&#64;tmesh</span></tt>, <tt class="docutils literal"><span class="pre">&#64;tmesh_fem</span></tt>, <tt class="docutils literal"><span class="pre">&#64;tfem</span></tt>, などを参照できます。いくつかの承認された略語があります:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;tcont_struct</span></tt> の <tt class="docutils literal"><span class="pre">&#64;tcs</span></tt></p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;tmesh_fem</span></tt> の <tt class="docutils literal"><span class="pre">&#64;tmf</span></tt></p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;tgeotrans</span></tt> の <tt class="docutils literal"><span class="pre">&#64;tgt</span></tt></p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;tglobal_function</span></tt> の <tt class="docutils literal"><span class="pre">&#64;tgf</span></tt></p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;tmesher_object</span></tt> の <tt class="docutils literal"><span class="pre">&#64;tmo</span></tt></p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;tmesh_levelset</span></tt> の <tt class="docutils literal"><span class="pre">&#64;tmls</span></tt></p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;tmesh_im</span></tt> の <tt class="docutils literal"><span class="pre">&#64;tmim</span></tt></p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;tlevelset</span></tt> の <tt class="docutils literal"><span class="pre">&#64;tls</span></tt></p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;tslice</span></tt> の <tt class="docutils literal"><span class="pre">&#64;tsl</span></tt></p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;tspmat</span></tt> の <tt class="docutils literal"><span class="pre">&#64;tsp</span></tt></p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">&#64;tprecond</span></tt> の <tt class="docutils literal"><span class="pre">&#64;tpre</span></tt></p>
</li>
</ul>
</div></blockquote>
<p>パラメータリスト (<tt class="docutils literal"><span class="pre">...</span></tt>) の末尾にある3つの点は、追加のパラメータが可能であることを意味します。省略可能なパラメーターは、角かっこで記述します。たとえば、  <tt class="docutils literal"><span class="pre">/*&#64;SET</span> <span class="pre">v</span> <span class="pre">=</span> <span class="pre">('name'[,</span> <span class="pre">&#64;int</span> <span class="pre">i])</span></tt> です。しかし、python インターフェイスを構築するには、 <tt class="file docutils literal"><span class="pre">extract_doc</span></tt> スクリプトによってどのように解釈されるかに注意してください。</p>
<p>マクロの2から5番目のパラメーターは、入力引数の最小数、最大値、出力引数の最小数、および出力引数の最大数にそれぞれ対応しています。動的に検証されます。</p>
<p>関数リストの追加パラメータ...。</p>
<p>不明な理由から、関数の本体には、 <tt class="docutils literal"><span class="pre">int</span> <span class="pre">a,</span> <span class="pre">b;</span></tt> などの複数の宣言を含めることはできません(c++ のマクロは追加パラメーターであると解釈します)。</p>
</li>
</ul>
<ul>
<li><p class="first">c++ の解説に含まれているドキュメントの部分は、 <a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> 形式である必要があります。特に、数式は :math:`f(x) = 3x^2+2x+4` か次の式に含めることができます:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="p">..</span> <span class="n">math</span><span class="o">::</span>

  <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">=</span> <span class="mi">3</span><span class="n">x</span><span class="o">^</span><span class="mi">2</span><span class="o">+</span><span class="mi">2</span><span class="n">x</span><span class="o">+</span><span class="mi">4</span>
</pre></div>
</div>
<p>記号 <tt class="docutils literal"><span class="pre">INIT::OBJNAME('method-name',</span> <span class="pre">...)</span></tt>, <tt class="docutils literal"><span class="pre">GET::OBJNAME('method-name',</span> <span class="pre">...)</span></tt>, <tt class="docutils literal"><span class="pre">SET::OBJNAME('method-name',</span> <span class="pre">...)</span></tt>, <tt class="docutils literal"><span class="pre">FUNC::FUNCNAME('subcommand-name',</span> <span class="pre">...)</span></tt> を使用して、インターフェイスの別のメソッドまたは関数を参照することができます。これは言語 (Matlab、Scilab または Python) に応じて正しい構文に置き換えられます。</p>
</li>
<li><p class="first">まだドキュメンテーションでは、特定の言語のための部品は <tt class="docutils literal"><span class="pre">&#64;MATLAB{specific</span> <span class="pre">part</span> <span class="pre">...}</span></tt>, <tt class="docutils literal"><span class="pre">&#64;SCILAB{specific</span> <span class="pre">part</span> <span class="pre">...}</span></tt> および <tt class="docutils literal"><span class="pre">&#64;PYTHON{specific</span> <span class="pre">part</span> <span class="pre">...}</span></tt> です。メソッド/サブコマンドがインタフェースに固有である場合、例えば Matlab のために、 <cite>GET</cite> を <cite>MATLABFUNC</cite> で <cite>MATLABGET</cite>, <cite>FUNC</cite> などで置き換えることができます。この追加機能に特定のコードが必要な場合は、タグ <tt class="docutils literal"><span class="pre">/*&#64;MATLABEXT</span></tt>, <tt class="docutils literal"><span class="pre">/*&#64;SCILABEXT</span></tt>, <tt class="docutils literal"><span class="pre">/*&#64;PYTHONEXT</span></tt> で追加することができます。たとえば、 <tt class="file docutils literal"><span class="pre">gf_mesh_fem_get.cc</span></tt> を参照してください。</p>
</li>
<li><p class="first">Python と Matlab オブジェクトの場合、 <cite>SET</cite> メソッドの名前は <cite>GET</cite> メソッドと同じである場合、 <cite>SET</cite> メソッドの先頭に <cite>set_</cite> が付きます。</p>
</li>
</ul>
</div>
<div class="section" id="adding-a-new-function-or-object-method-to-the-getfem-interface">
<h2>getfem インターフェイスへの新しい関数またはオブジェクトメソッドの追加<a class="headerlink" href="#adding-a-new-function-or-object-method-to-the-getfem-interface" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>新しい関数 <tt class="docutils literal"><span class="pre">gf_mesh_get(m,</span> <span class="pre">&quot;foobar&quot;,</span> <span class="pre">.)</span></tt>, を追加したい場合、 変更するメインファイルは <tt class="file docutils literal"><span class="pre">gf_mesh_get.cc</span></tt> です。ユーザーがその関数を使用するときに scilab、matlab または python をクラッシュさせることができないようにするために、関数に渡されるすべての引数をチェックしてください。関数を追加するには、 <tt class="file docutils literal"><span class="pre">gf_mesh_get.cc</span></tt> で定義されているマクロを使用します。</p>
<p><tt class="file docutils literal"><span class="pre">gf_mesh_get.cc</span></tt> 内の関数のドキュメントを追加することを忘れないでください、これは、matlab/scilab/python のヘルプファイル(matlab のプロンプトで &#8220;<tt class="docutils literal"><span class="pre">help</span> <span class="pre">gf_mesh_get</span></tt>&#8221; 型であるときにヘルプファイルに表示されるドキュメントです)、 そして getfem_python 自動生成ドキュメントです。</p>
<p>重要。配列のインデックスは、Python では0から始まり、Matlab と Scilab では1であることに注意してください。特定の関数:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="n">config</span><span class="o">::</span><span class="n">base_index</span><span class="p">()</span>
</pre></div>
</div>
<p>値が python では0、Matlab では1、Scilab はインデックスとインデックスの配列を交換するために使用されなければなりません。2度と修正をしないように気をつけてください。インデックスのいくつかの配列は自動的にシフトされます。</p>
</div>
<div class="section" id="adding-a-new-object-to-the-getfem-interface">
<h2>getfem インターフェイスへの新しいオブジェクトの追加<a class="headerlink" href="#adding-a-new-object-to-the-getfem-interface" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>インターフェイスに新しいオブジェクトを追加するには、新しい対応するソース <tt class="file docutils literal"><span class="pre">gf_obj.cc</span></tt>, <tt class="file docutils literal"><span class="pre">gf_obj_get.cc</span></tt> と <tt class="file docutils literal"><span class="pre">gf_obj_set.cc</span></tt> を構築する必要があります。もちろん、モデルとして、既存のものを取ることができます。</p>
<p>オブジェクトの管理については、次のように <tt class="file docutils literal"><span class="pre">getfemint.h</span></tt> の最初にクラスを宣言する必要があります(アルファベット順に関して)、そして3つの関数を宣言します:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">bool</span> <span class="n">is_</span><span class="s">&quot;name&quot;</span><span class="n">_object</span><span class="p">(</span><span class="k">const</span> <span class="n">mexarg_in</span> <span class="o">&amp;</span><span class="n">p</span><span class="p">);</span>
<span class="n">id_type</span> <span class="n">store_</span><span class="s">&quot;name&quot;</span><span class="n">_object</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">object_class</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">shp</span><span class="p">);</span>
<span class="n">object_class</span> <span class="o">*</span><span class="n">to_</span><span class="s">&quot;name&quot;</span><span class="n">_object</span><span class="p">(</span><span class="k">const</span> <span class="n">mexarg_in</span> <span class="o">&amp;</span><span class="n">p</span><span class="p">);</span>
</pre></div>
</div>
<p>ここで、 &#8220;name&#8221; はインターフェイス内のオブジェクトの名前であり、 <tt class="docutils literal"><span class="pre">object_class</span></tt> は getfem のクラス名です(たとえば、メッシュオブジェクトの場合は <tt class="docutils literal"><span class="pre">getfem::mesh</span></tt> )。または、 <em>GetFEM++</em> で共有ポインタによって操作されるオブジェクトの場合、3番目の関数は共有ポインタを返すことができます。</p>
<p>重要: インタフェースするために、 <em>GetFEM++</em> オブジェクトは <tt class="docutils literal"><span class="pre">dal::static_stored_object</span></tt> から派生しなければなりません。ただし、そうでない場合は、ラッパークラスを <tt class="docutils literal"><span class="pre">bgeot::base_poly</span></tt> のように定義できます (<tt class="file docutils literal"><span class="pre">getfemint.h</span></tt> の末尾を参照してください)。</p>
<p>前の3つの関数は、 <tt class="file docutils literal"><span class="pre">getfemint.cc</span></tt> の末尾に実装する必要があります。 <tt class="file docutils literal"><span class="pre">getfemint.cc</span></tt> で定義されている2つのマクロのいずれかを使用することができます。最初のマクロは標準的な目的のためであり、共有ポインタの <em>GetFEM++</em> で操作する目的のために二番目のオブジェクトを使用します。</p>
<p><tt class="file docutils literal"><span class="pre">getfemint.cc</span></tt> の最後に <tt class="docutils literal"><span class="pre">name_of_getfemint_class_id</span></tt> と <tt class="docutils literal"><span class="pre">class_id_of_object</span></tt> という関数も完成させる必要があります。</p>
<p><tt class="file docutils literal"><span class="pre">getfem_interface.cc</span></tt> のインターフェイス関数の呼び出しを追加する必要があります そしてファイル <tt class="file docutils literal"><span class="pre">bin/extract_doc</span></tt> を変更し構成ファイルを実行します。</p>
<p>The methods <tt class="docutils literal"><span class="pre">get('char')</span></tt> and <tt class="docutils literal"><span class="pre">get('display')</span></tt> should be defined for each object. The first one should give a string allowing the object to be saved in a file and the second one is to give some information about the object. Additionaly, a constructor from a string is necessary to load the object from a file.</p>
<p>Scilab インターフェイスのためにファイル <tt class="file docutils literal"><span class="pre">sci_gateway/c/builder_gateway_c.sce.in</span></tt> は、ディレクトリ <tt class="file docutils literal"><span class="pre">macros/overload</span></tt> 内のファイルを変更することがあります。</p>
</div>
<div class="section" id="state">
<h2>状況<a class="headerlink" href="#state" title="このヘッドラインへのパーマリンク">¶</a></h2>
</div>
<div class="section" id="perspectives">
<h2>展望<a class="headerlink" href="#perspectives" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>インターフェイスは <em>GetFEM++</em> と連動して成長します。 <em>GetFEM++</em> のメイン機能はインタフェースされています。</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <p class="logo"><a href="../index.html">
    <img class="logo" src="../_static/logo_getfem_small.png" alt="Logo"/>
  </a></p>
  <h3><a href="../contents.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#">スクリプト言語 (Python、Scilab、Matlab) とのインタフェース</a><ul>
<li><a class="reference internal" href="#description">説明</a></li>
<li><a class="reference internal" href="#files">ファイル</a></li>
<li><a class="reference internal" href="#objects-methods-and-functions-of-the-interface">インターフェイスのオブジェクト、メソッド、および関数</a></li>
<li><a class="reference internal" href="#adding-a-new-function-or-object-method-to-the-getfem-interface">getfem インターフェイスへの新しい関数またはオブジェクトメソッドの追加</a></li>
<li><a class="reference internal" href="#adding-a-new-object-to-the-getfem-interface">getfem インターフェイスへの新しいオブジェクトの追加</a></li>
<li><a class="reference internal" href="#state">状況</a></li>
<li><a class="reference internal" href="#perspectives">展望</a></li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="libdesc_cont.html"
                        title="前の章へ">継続モジュール</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="appendixA.html"
                        title="次の章へ">付録A.参照要素と実要素の基本的な計算</a></p>            <h3>Download</h3>
            <p><a href="../download.html">Download GetFEM++ </a></p>
	    <h3>Main documentations</h3>
	    <ul>
              
	      <li><a href="../userdoc/index.html">GetFEM++ User documentation</a></li>
              <li><a href="../python/index.html">Python Interface</a></li>
	      <li><a href="../matlab/index.html">Matlab Interface</a></li>
	      <li><a href="../scilab/index.html">Scilab Interface</a></li>
	      <li><a href="../gmm/index.html"> Gmm++</a></li>
	      <li><a href="index.html"> GetFEM++ project</a></li>
            </ul>

            <h3>Other resources</h3>
            <ul>
              <li><a href="../screenshots/shots.html">Screenshots</a></li>
              <li><a href="../links.html">Related links</a></li>
	      <li><a href="https://savannah.nongnu.org/projects/getfem">Hosted by Savannah </a></li>
              
              
            </ul>
<div id="searchbox" style="display: none">
  <h3>クイック検索</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="検索" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    モジュール、クラス、または関数名を入力してください
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="appendixA.html" title="付録A.参照要素と実要素の基本的な計算"
             >次へ</a> |</li>
        <li class="right" >
          <a href="libdesc_cont.html" title="継続モジュール"
             >前へ</a> |</li>
        <li><a href="https://savannah.nongnu.org/projects/getfem" <img src="../_static/icon.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li></a>
        <li><a href="../index.html">GetFEM++</a> &raquo;</li>

          <li><a href="index.html" >$B%W%m%8%&#8217;%/%H$N&#64;bL&#64;(B</a> &raquo;</li>
          <li><a href="libdesc.html" >ライブラリのさまざまな部分の説明</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; <a href="../copyright.html">Copyright</a> 2004-2017 GetFEM++ project.
    </div>
  </body>
</html>